===============================
Cleansing of user-provided HTML
===============================


``cleanse_html``
================

The ``cleanse_html`` function uses feincms-cleanse_ to do the heavy lifting of
cleansing HTML code generated by rich text editors. The result of this
step is uniform, simple HTML code without things like inline styles,
empty paragraphs and paragraphs inside lists breaking your well-crafted
design.

Examples of feincms-cleanse_'s functionality are best seen in its
`test suite`_.


``CleansedRichTextField``
=========================

This is a subclass of django-ckeditor_'s ``RichTextField``. The recommended
configuration is as follows::

    CKEDITOR_CONFIGS = {
        'default': {
            'toolbar': 'Custom',
            'format_tags': 'h1;h2;h3;p;pre',
            'toolbar_Custom': [
                ['Format', 'RemoveFormat'],
                ['Bold', 'Italic', 'Strike', '-',
                 'NumberedList', 'BulletedList', '-',
                 'Anchor', 'Link', 'Unlink', '-',
                 'Source'],
            ],
        },
    }

    # Settings for feincms3.plugins.richtext.RichText
    CKEDITOR_CONFIGS['richtext-plugin'] = CKEDITOR_CONFIGS['default']

If you want or require a different cleansing function, simply override
the default with ``CleansedRichTextField(cleanse=your_function)``. The
cleansing function receives the HTML as its first and only argument and
returns the cleansed HTML.


.. _django-ckeditor: https://pypi.python.org/pypi/django-ckeditor
.. _feincms-cleanse: https://pypi.python.org/pypi/feincms-cleanse
.. _test suite: https://github.com/feincms/feincms-cleanse/blob/master/feincms_cleanse/tests/test_cleanse.py
